{% extends "e_store/base.html" %}

{% load i18n %}

{% block page_header %}
  <div class="d-flex justify-content-between align-items-center">
    <h1>{{ title }}s</h1>
    <div class="d-flex justify-content-between align-items-center">
      <h5><i class="bi bi-arrow-down-up"></i></h5>
      <form method="POST">
        {% csrf_token %}
        <select name="sort" class="form-select form-select-sm ms-2" onchange="this.form.submit()">
          {% for sort_code, field_label in fields %}
            <!-- The value sort_code corresponding to session_sort will be selected. -->
            <option value="{{ sort_code }}" {% if sort_code == session_sort %}selected{% endif %}>
              {{ field_label }}
            </option>
          {% endfor %}
        </select>
      </form>
    </div>
  </div>
{% endblock page_header %}

{% block content %}
  {% if items %}
    <div class="row">
      {% for item in items %}
        <div class="col-auto mb-3">
          <div class="m-2 text-center">
            <a href="{% url 'e_store:item' item.id %}">
              <div class="card" style="width: 200px; height: 200px; overflow: hidden;">
                <img src="{{ item.image.url }}" style="width: 200px; height: 200px; object-fit: cover;">
              </div>
            </a>
            <h5 class="mt-2 mb-0">{{ item.name }}</h5>
            <p class="mb-0">{% trans "Price" %}: {{ item.price|floatformat:2 }} DA</p>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <h3>We're getting things ready! Items will be available shortly.</h3>
  {% endif %}
{% endblock content %}
